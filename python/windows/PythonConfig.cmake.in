# Copyright (c) 2022 IHU Liryc, Universit√© de Bordeaux, Inria.
# License: BSD-3-Clause

@PACKAGE_INIT@

cmake_policy(SET CMP0057 NEW) # IN_LIST operator

if(NOT Python_FIND_COMPONENTS)
    set(Python_FIND_COMPONENTS Interpreter)
endif()

set_and_check(_binary_dir "@PACKAGE_PYTHON_BINARY_DIR@")

if(Interpreter IN_LIST Python_FIND_COMPONENTS)
    set_and_check(Python_EXECUTABLE "${_binary_dir}/python.exe")
    set_and_check(Python_STDLIB "${_binary_dir}/lib")
    set_and_check(Python_STDARCH "${_binary_dir}/DLLs")
    set(Python_SITELIB "${_binary_dir}/lib/python@PYNCPP_REQUIRED_PYTHON_VERSION_MAJOR@.@PYNCPP_REQUIRED_PYTHON_VERSION_MINOR@/site-packages")
    set(Python_SITEARCH "${_binary_dir}/lib/python@PYNCPP_REQUIRED_PYTHON_VERSION_MAJOR@.@PYNCPP_REQUIRED_PYTHON_VERSION_MINOR@/site-packages")

    if(EXISTS "${Python_STDLIB}/os.py")
        set(Python_Interpreter_FOUND TRUE)
    else()
        set(Python_Interpreter_FOUND FALSE)
    endif()
endif()

if(Development IN_LIST Python_FIND_COMPONENTS)
    set_and_check(Python_RUNTIME_LIBRARY_DIRS "${_binary_dir}/bin")
    set_and_check(_stub_library_dir "${_binary_dir}/libs")
    set(Python_LIBRARY_DIRS ${Python_RUNTIME_LIBRARY_DIRS} "${_stub_library_dir}")
    set_and_check(Python_INCLUDE_DIRS "${_binary_dir}/include")
    set_and_check(_library_0 "${_binary_dir}/bin/python@PYNCPP_REQUIRED_PYTHON_VERSION_MAJOR@@PYNCPP_REQUIRED_PYTHON_VERSION_MINOR@.dll")
    set_and_check(_library_1 "${_binary_dir}/bin/python@PYNCPP_REQUIRED_PYTHON_VERSION_MAJOR@@PYNCPP_REQUIRED_PYTHON_VERSION_MINOR@_d.dll")
    set_and_check(_library_2 "${_binary_dir}/libs/python@PYNCPP_REQUIRED_PYTHON_VERSION_MAJOR@@PYNCPP_REQUIRED_PYTHON_VERSION_MINOR@.lib")
    set_and_check(_library_3 "${_binary_dir}/libs/python@PYNCPP_REQUIRED_PYTHON_VERSION_MAJOR@@PYNCPP_REQUIRED_PYTHON_VERSION_MINOR@_d.lib")
    set(Python_LIBRARIES  "${_library_0}" "${_library_1}" "${_library_2}" "${_library_3}")

    if(EXISTS "${Python_INCLUDE_DIRS}/Python.h")
        set(Python_Development_FOUND TRUE)
    else()
        set(Python_Development_FOUND FALSE)
    endif()
endif()

set(Python_INTERPRETER_ID Python)
set(Python_LINK_OPTIONS)

set(Python_FOUND TRUE)
check_required_components(Python)
